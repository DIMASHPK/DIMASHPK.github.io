(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},18:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(6),o=a.n(s),i=(a(18),a(1)),c=a(10),u=a(2),l=a.n(u),m=a(4),h=a(7),d=a(8),f=a(11),g=a(9),p=a(3),y=a(12),b=(a(20),function(e){var t=e.x,a=e.y,n=e.background,s=e.userClick;return r.a.createElement("div",{className:"dot",style:{background:n},onClick:function(){return s(t,a)}})}),v=function(e){var t=e.winner,a=e.dots,n=e.blueBg,s=e.newGameFlag,o=e.newGame,i=e.userClick,c=e.name,u=e.mode,l=e.handleChange,m=e.settings;return r.a.createElement("div",{className:"game_board"},r.a.createElement("div",{className:"game_menu"},r.a.createElement("select",{name:"mode",value:u,onChange:l},r.a.createElement("option",{value:"0",hidden:!0,disabled:!0,selected:!0},"Pick game mode"),m.length>0&&m.map((function(e,t){return r.a.createElement("option",{key:t,value:e[Object.keys(e)].delay},Object.keys(e))}))),r.a.createElement("input",{type:"text",placeholder:"your name",name:"name",value:c,onChange:l}),r.a.createElement("button",{onClick:s?o:n},s?"New game":"play")),r.a.createElement("div",{className:"game"},r.a.createElement("p",null,t?"\u041f\u043e\u0431\u0435\u0434\u0438\u043b: ".concat(t):"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c"),a.map((function(e,t){return r.a.createElement("div",{key:t,className:"dots_row"},e.map((function(e,n){return r.a.createElement(b,{dot:e,x:t,y:n,key:n,background:a[t][n],userClick:i})})))}))))},w=function(e){var t=e.winnerObj;return r.a.createElement("div",{className:"leaderBoard"},r.a.createElement("h1",null,"Leader Board"),t.length>0&&t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("p",null,e.winner),r.a.createElement("p",null,e.date))})))},k=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).count=0,a.state={indexes:Array.from(Array(5),(function(e,t){return Array.from(Array(5),(function(e,a){return[t,a]}))})).flat().sort(a.shuffle),dots:Array.from(Array(5),(function(){return Array.from(Array(5),(function(){return null}))})),newGame:!1,computer:0,user:0,winner:"",mode:"0",name:"",gameSettings:[],dashboardData:[]},a.shuffle=a.shuffle.bind(Object(p.a)(a)),a.blueBg=a.blueBg.bind(Object(p.a)(a)),a.userClick=a.userClick.bind(Object(p.a)(a)),a.newGame=a.newGame.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"shuffle",value:function(){return Math.random()-.5}},{key:"blueBg",value:function(){var e=this;if(this.state.name.length>0&&"0"!=this.state.mode){var t=this.state.dots.slice();t.length,t.length;if(this.state.computer>=Math.pow(t.length,2)/2||this.state.user>=Math.pow(t.length,2)/2)return this.count=0,this.setState((function(e){return{winner:e.computer>e.user?"Computer":e.name,newGame:!e.newGame,dashboardData:[{winner:e.computer>e.user?"\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440":e.name,date:"".concat((new Date).toLocaleTimeString(),"; ").concat((new Date).toLocaleDateString())}]}})),void function(){var t,a;l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"https://starnavi-frontend-test-task.herokuapp.com/winners",n.next=3,l.a.awrap(fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify.apply(JSON,Object(m.a)(e.state.dashboardData))}));case 3:return t=n.sent,n.next=6,l.a.awrap(t.json());case 6:a=n.sent,console.log(a.message),e.getWinners();case 9:case"end":return n.stop()}}))}();var a=Object(c.a)(this.state.indexes[this.count],2),n=a[0],r=a[1];t[n][r]="blue",this.count++,this.setState({dots:t}),setTimeout((function(){"blue"===t[n][r]?(t[n][r]="red",e.setState({dots:t,computer:e.state.computer+1}),e.blueBg()):"green"===t[n][r]&&e.blueBg()}),this.state.mode)}else alert("Enter name and pick up game mode")}},{key:"newGame",value:function(){for(var e=this.state.dots.slice(),t=0;t<e.length;t++)for(var a=0;a<e.length;a++)e[t][a]=null,this.setState({dots:e});this.setState((function(e){return{newGame:!e.newGame,winner:"",mode:"0",name:""}}))}},{key:"userClick",value:function(e,t){var a=this.state.dots.slice();"blue"===a[e][t]&&(a[e][t]="green",this.setState((function(e){return{dots:a,user:e.user+1}})))}},{key:"handleChange",value:function(e){var t=e.target,a=e.target.name;"mode"===a?("2000"===t.value&&this.setState({indexes:Array.from(Array(5),(function(e,t){return Array.from(Array(5),(function(e,a){return[t,a]}))})).flat().sort(this.shuffle),dots:Array.from(Array(5),(function(){return Array.from(Array(5),(function(){return null}))}))}),"1000"===t.value&&this.setState({indexes:Array.from(Array(10),(function(e,t){return Array.from(Array(10),(function(e,a){return[t,a]}))})).flat().sort(this.shuffle),dots:Array.from(Array(10),(function(){return Array.from(Array(10),(function(){return null}))}))}),"900"===t.value&&this.setState({indexes:Array.from(Array(15),(function(e,t){return Array.from(Array(15),(function(e,a){return[t,a]}))})).flat().sort(this.shuffle),dots:Array.from(Array(15),(function(){return Array.from(Array(15),(function(){return null}))}))}),this.setState(Object(i.a)({},a,t.value))):this.setState(Object(i.a)({},a,t.value))}},{key:"getWinners",value:function(){var e=this;!function(){var t,a,n,r,s,o,i;l.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return"https://starnavi-frontend-test-task.herokuapp.com/game-settings",c.next=3,l.a.awrap(fetch("https://starnavi-frontend-test-task.herokuapp.com/game-settings"));case 3:return t=c.sent,c.next=6,l.a.awrap(t.json());case 6:return a=c.sent,"https://starnavi-frontend-test-task.herokuapp.com/winners",c.next=10,l.a.awrap(fetch("https://starnavi-frontend-test-task.herokuapp.com/winners"));case 10:return n=c.sent,c.next=13,l.a.awrap(n.json());case 13:r=c.sent,console.log(r),s=a.easyMode,o=a.normalMode,i=a.hardMode,e.setState({gameSettings:[{easyMode:s},{normalMode:o},{hardMode:i}],dashboardData:Object(m.a)(r)});case 17:case"end":return c.stop()}}))}()}},{key:"componentDidMount",value:function(){this.getWinners()}},{key:"render",value:function(){var e;return console.log(Math.pow(this.state.dots.length,2)/2),r.a.createElement("div",{className:"main_wrap"},r.a.createElement(v,(e={winner:this.state.winner,dots:this.state.dots,blueBg:this.blueBg,newGame:this.newGame,newGameFlag:this.state.newGame},Object(i.a)(e,"winner",this.state.winner),Object(i.a)(e,"userClick",this.userClick),Object(i.a)(e,"mode",this.state.mode),Object(i.a)(e,"name",this.state.name),Object(i.a)(e,"handleChange",this.handleChange),Object(i.a)(e,"settings",this.state.gameSettings),e)),r.a.createElement(w,{winnerObj:this.state.dashboardData}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.ebfcf788.chunk.js.map